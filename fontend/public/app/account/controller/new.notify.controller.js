'use strict';angular.module('shopnxApp').controller('NewNotifyCtrl',function($scope,Auth,$location,$rootScope,socket){$rootScope.isPageProduct=false;$rootScope.isHomePage=false;Auth.isLoggedInAsync(function(cb){if(!cb){$location.path('/dang-nhap.html')}else{$scope.listhistorysell={};$scope.list_notify={};var iduser=Auth.getCurrentUser()._id;var url_notify_1='/api/users/'+iduser+'/getListNewNotify';var url_notify_2='/api/users/'+iduser+'/getListNewNotify_tmp';var change_urlNotify=function(){if($scope.urlNewNotify===url_notify_1){$scope.urlNewNotify=url_notify_2}else{$scope.urlNewNotify=url_notify_1}};$scope.urlNewNotify=url_notify_1;Auth.getListNewNotify({id:iduser}).then(function(results){$scope.list_notify=results});$scope.openNewNotify=function(slug){$location.path("/thong-bao-moi/"+slug+".html")};socket.socket.on('customer:new_notify',function(data){change_urlNotify()});socket.socket.on('notify:resetbytype',function(data){change_urlNotify()});var md=new MobileDetect(window.navigator.userAgent);$scope.doTheBack=function(){window.history.back()};$scope.isMobile=false;$scope.isnotMobile=true;if(md.mobile()!=null){$scope.isMobile=true;$scope.isnotMobile=false}}})}).controller('NewNotifyDetailCtrl',function($scope,Auth,$location,$rootScope,$stateParams){$rootScope.isPageProduct=false;$rootScope.isHomePage=false;Auth.isLoggedInAsync(function(cb){if(!cb){$location.path('/dang-nhap.html')}else{$scope.notify={};var iduser=Auth.getCurrentUser()._id;Auth.getDetailNewNotify({slug:$stateParams.slug,user_id:iduser}).then(function(result){$scope.notify=result});var md=new MobileDetect(window.navigator.userAgent);$scope.doTheBack=function(){window.history.back()};$scope.isMobile=false;$scope.isnotMobile=true;if(md.mobile()!=null){$scope.isMobile=true;$scope.isnotMobile=false}}})});