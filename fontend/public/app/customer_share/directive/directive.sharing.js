'use strict'; angular.module('shopnxApp') .directive('listSharing', function ($loading , $timeout , CustomerSharing, Auth) {return {restrict: 'E', scope: {product: '='}, templateUrl: 'app/customer_share/views/tpl.list.customer.sharing.view.html', link: function (scope, element, attribute) {scope.list_sharing = {}; var md = new MobileDetect(window.navigator.userAgent); scope.isMobile = false; scope.isnotMobile = true; if(md.mobile() != null){scope.isMobile = true; scope.isnotMobile = false; } var getListSharingByProduct = function(){scope.urlSharingList = '/api/sharing/get-sharing-by-product/'+scope.product.id; CustomerSharing.getListSharingByProduct.query({id:scope.product.id}) .$promise.then(function(result){scope.list_sharing = result; }); }; scope.$watch('product',function(product) {if(typeof product != 'undefined'){getListSharingByProduct(); } }); } }; }) .directive('sharingUserPost', function ($loading , $timeout , Auth) {return {restrict: 'E', scope: {user : '=', collection: '='}, link: function (scope, element, attribute) {scope.$watch('user',function(item) {if(item){Auth.getUserbyId(item) .then(function(result){if(result != null){scope.collection = result; } }) .catch(function(err){}); } }); } }; }) .directive('sharingCommentUser', function ($loading , $timeout , Auth) {return {restrict: 'E', scope: {user : '=', collection: '='}, link: function (scope, element, attribute) {scope.$watch('user',function(item) {if(item){Auth.getUserbyId(item) .then(function(result){if(result != null){scope.collection = result; } }) .catch(function(err){}); } }); } }; })