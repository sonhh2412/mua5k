// angular-paginate-anything - v4.2.0
!function(){"use strict";function a(a){var b=[1,2.5,5];return Math.floor(Math.pow(10,Math.floor(a/3))*b[a%3])}function b(a){if(a<1)return 0;var b=Math.floor(Math.log(a)/Math.LN10),c=a/(2.5*Math.pow(10,b));return c>=3&&(b++,c=0),3*b+Math.round(Math.min(2,c))}function c(c){return c===1/0?1/0:a(b(c))}function d(a,b){return a=angular.isArray(a)?a:[a],b?a.concat(b):a}function e(a){var b=a&&a.match(/^(?:items )?(\d+)-(\d+)\/(\d+|\*)$/);return b?{from:+b[1],to:+b[2],total:"*"===b[3]?1/0:+b[3]}:"*/0"===a?{total:0}:null}function f(a){return a.to-a.from+1}angular.module("bgf.paginateAnything",[]).directive("bgfPagination",function(){var g=3,h=250,i=50;return{restrict:"AE",scope:{url:"=",collection:"=",urlParams:"=?",headers:"=?",page:"=?",perPage:"=?",perPagePresets:"=?",autoPresets:"=?",clientLimit:"=?",linkGroupSize:"=?",reloadPage:"=?",size:"=?",passive:"@",transformResponse:"=?",method:"@",postData:"=?",loadFn:"&",numPages:"=?",numItems:"=?",serverLimit:"=?",rangeFrom:"=?",rangeTo:"=?"},templateUrl:function(a,b){return b.templateUrl||"src/paginate-anything.html"},replace:!0,controller:["$scope","$attrs","$http",function(j,k,l){function m(c){if("true"!==j.passive&&(j.url||n)){j.$emit("pagination:loadStart",c);var g={method:j.method||"GET",url:j.url,params:j.urlParams,data:j.postData,headers:angular.extend({},j.headers,{"Range-Unit":"items",Range:[c.from,c.to].join("-")}),transformResponse:d(l.defaults.transformResponse,j.transformResponse)},h=n?j.loadFn({config:g}):l(g);h.then(function(d){var g=e(d.headers("Content-Range"));if(204===d.status||g&&0===g.total?(j.numItems=0,j.collection=[]):(j.numItems=g?g.total:d.data.length,j.collection=d.data||[]),g&&(j.rangeFrom=g.from,j.rangeTo=g.to,f(g)<g.total&&(c.to<g.total-1||g.to<g.total-1&&g.total<c.to)&&(!j.perPage||f(g)<j.perPage))){if(j.autoPresets){var h=b(f(g));a(h)>f(g)&&h--,j.serverLimit=a(h)}else j.serverLimit=f(g);j.perPage=j.Math.min(j.serverLimit,j.clientLimit)}j.numPages=Math.ceil(j.numItems/(j.perPage||i)),j.$emit("pagination:loadPage",d.status,d.config)},function(a){j.$emit("pagination:error",a.status,a.config)})}}j.reloadPage=!1,j.serverLimit=1/0,j.Math=window.Math;var n=void 0!==k.loadFn;"boolean"!=typeof j.autoPresets&&(j.autoPresets=!0);var o=j.linkGroupSize,p=j.clientLimit;j.linkGroupSize="number"==typeof o?o:g,j.clientLimit="number"==typeof p?p:h,j.updatePresets=function(){if(j.autoPresets){var c,d=[];for(c=Math.min(3,b(j.perPage||i));c<=b(Math.min(j.clientLimit,j.serverLimit));c++)d.push(a(c));j.perPagePresets=d}else j.perPagePresets=j.perPagePresets.filter(function(a){return a<=j.serverLimit}).concat([j.serverLimit])},j.gotoPage=function(a){a<0||a*j.perPage>=j.numItems||(j.page=a)},j.linkGroupFirst=function(){var a=Math.max(0,j.linkGroupSize-(j.numPages-1-(j.page+2)));return Math.max(0,j.page-(j.linkGroupSize+a))},j.linkGroupLast=function(){var a=Math.max(0,j.linkGroupSize-(j.page-2));return Math.min(j.numPages-1,j.page+(j.linkGroupSize+a))},j.isFinite=function(){return j.numPages<1/0},j.page=j.page||0,j.size=j.size||"md",j.autoPresets&&j.updatePresets(),j.$watch("page",function(a,b){if("true"!==j.passive&&a!==b){if(a<0||a*j.perPage>=j.numItems)return;var d=j.perPage||i;j.autoPresets&&(d=c(d)),m({from:a*d,to:(a+1)*d-1})}}),j.$watch("perPage",function(a,b){if("true"!==j.passive&&"number"==typeof b&&a!==b){var c=j.page*b,d=Math.floor(c/a);j.page!==d?j.page=d:m({from:j.page*a,to:(j.page+1)*a-1})}}),j.$watch("serverLimit",function(a,b){"true"!==j.passive&&a!==b&&j.updatePresets()}),j.$watch("url",function(a,b){"true"!==j.passive&&a!==b&&(0===j.page?j.reloadPage=!0:j.page=0)}),j.$watch("urlParams",function(a,b){"true"!==j.passive&&(angular.equals(a,b)||(0===j.page?j.reloadPage=!0:j.page=0))},!0),j.$watch("headers",function(a,b){"true"!==j.passive&&(angular.equals(a,b)||(0===j.page?j.reloadPage=!0:j.page=0))},!0),j.$watch("reloadPage",function(a,b){if("true"!==j.passive&&a===!0&&b===!1){var c=j.perPage||i;j.reloadPage=!1,m({from:j.page*c,to:(j.page+1)*c-1})}}),j.$watch("transformResponse",function(a,b){"true"!==j.passive&&a&&b&&(angular.equals(a.toString(),b.toString())||(0===j.page?j.reloadPage=!0:j.page=0))},!0),j.$on("pagination:reload",function(){j.reloadPage=!0});var q=j.perPage||i;j.autoPresets&&(q=c(q)),m({from:j.page*q,to:(j.page+1)*q-1})}]}}).filter("makeRange",function(){return function(a){var b,c;switch(a.length){case 1:b=0,c=parseInt(a[0],10)-1;break;case 2:b=parseInt(a[0],10),c=parseInt(a[1],10);break;default:return a}for(var d=[],e=b;e<=c;e++)d.push(e);return d}})}();